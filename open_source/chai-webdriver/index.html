<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Chai Webdriver | Bites from Good Eggs</title><meta name="author" content="Max Edmands" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="icon" type="image/png" href="../../favicon.png" /><link rel="stylesheet" href="../../styles/main.css" /><link rel="alternate" title="RSS" type="application/rss+xml" href="../../rss" /><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26193287-5', 'github.io');
ga('send', 'pageview');</script></head><body><header><h1><a href="../../">Bites</a></h1><ul class="unstyled nav"><li><a href="../../">Blog</a></li><li><a href="../../open_source">Open Source</a></li><li><a href="../../news">News</a></li></ul></header><div id="main"><div id="content"><div><article class="post" role="article"><header><img class="author" src="http://fpio.goodeggs.com/api/file/4HBn1HQRvqTW9BdESZVX/convert?w=150&amp;h=150&amp;fit=crop&amp;align=faces&amp;cache=true" alt="Max Edmands" /><h1 class="entry-title">Chai Webdriver</h1><p class="meta"><a href="../../authors/max_edmands/">Max Edmands</a> on <time datetime="2014-01-13T00:00:00.000Z">January 13th, 2014</time></p></header><div class="entry-content"><p>Provides <a href="https://npmjs.org/package/selenium-webdriver">selenium-webdriver</a> sugar for the <a href="http://chaijs.com/">Chai</a> assertion library. Allows you to create expressive integration tests:</p>
<pre class="highlight"><code class="javascript">expect(<span class="string">'.frequency-field'</span>).dom.to.contain.text(<span class="string">'One time'</span>)
expect(<span class="string">'.toggle-pane'</span>).dom.to.not.be.visible()</code></pre>
<p><a href="https://github.com/goodeggs/chai-webdriver">Check it out on GitHub</a> or:</p>
<pre class="highlight"><code class="bash">npm install chai-webdriver</code></pre>
<!-- more -->

<h2 id="what-sorts-of-assertions-can-we-make-">What sorts of assertions can we make?</h2>
<p>All assertions start with a css selector, for example:</p>
<ul>
<li><code>expect(&#39;.list&#39;)</code></li>
<li><code>expect(&#39;div &gt; h1&#39;)</code></li>
<li><code>expect(&#39;a[href=http://google.com]&#39;)</code></li>
</ul>
<p>Then we add the dom flag, like so:</p>
<ul>
<li><code>expect(selector).dom</code></li>
</ul>
<p>Finally, we can add our assertion to the chain:</p>
<ul>
<li><code>expect(selector).dom.to.have.text(&#39;string&#39;)</code> - Test the text value of the dom against supplied string. Exact matches only.</li>
<li><code>expect(selector).dom.to.contains.text(&#39;string&#39;)</code> - Test the text value of the dom against supplied string. Partial matches allowed.</li>
<li><code>expect(selector).dom.to.be.visible()</code> - Check whether or not the element is being rendered</li>
<li><code>expect(selector).dom.to.be.disabled()</code> - Check whether or not the form element is disabled</li>
<li><code>expect(selector).dom.to.have.count(number)</code> - Test how many elements exist in the dom with the supplied selector</li>
<li><code>expect(selector).dom.to.have.style(&#39;property&#39;, &#39;value&#39;)</code> - Test the CSS style of the element. Exact matches only, unfortunately, for now.</li>
<li><code>expect(selector).dom.to.have.value(&#39;string&#39;)</code> - Test the value of a form field against supplied string.</li>
</ul>
<p>You can also always add a <code>not</code> in there to negate the assertion:</p>
<ul>
<li><code>expect(selector).dom.not.to.have.style(&#39;property&#39;, &#39;value&#39;)</code></li>
</ul>
<h2 id="caveats">Caveats</h2>
<p>Right now, we inject an instance of <a href="http://sizzlejs.com/">Sizzle.js</a> onto the page to ease selection. This is not ideal because it might clobber stuff, but it&#39;s a start. And odds are it won&#39;t change anything for you.</p>
<h2 id="setup">Setup</h2>
<p>Setup is pretty easy. Just:</p>
<pre class="highlight"><code class="javascript">
<span class="comment">// Start with a webdriver instance:</span>
<span class="keyword">var</span> sw = require(<span class="string">'selenium-webdriver'</span>);
<span class="keyword">var</span> driver = <span class="keyword">new</span> sw.Builder()
  .withCapabilities(sw.Capabilities.chrome())
  .build()

<span class="comment">// And then...</span>
<span class="keyword">var</span> chai = require(<span class="string">'chai'</span>);
<span class="keyword">var</span> chaiWebdriver = require(<span class="string">'chai-webdriver'</span>);
chai.use chaiWebdriver(driver);

<span class="comment">// And you're good to go!</span>
driver.get(<span class="string">'http://github.com'</span>);
chai.expect(<span class="string">'#site-container h1.heading'</span>).dom.to.not.contain.text(<span class="string">"I'm a kitty!"</span>);</code></pre>
<h2 id="contributing">Contributing</h2>
<p>so easy.</p>
<pre class="highlight"><code class="bash">npm install           <span class="comment"># download the neccesary development dependencies</span>
npm run-script build  <span class="comment"># compile coffee-script into javascript</span>
npm test              <span class="comment"># build and run the specs</span></code></pre>
<h2 id="license">License</h2>
<p>MIT.</p>
</div><footer><p class="meta"></p><div id="disqus_thread"></div><script>window.disqus_shortname = 'goodeggsbytes'; window.disqus_url = 'http://bites.goodeggs.com/open_source/chai-webdriver/'</script><script async="async" src="//goodeggsbytes.disqus.com/embed.js"></script></footer></article></div></div></div><footer><div class="mission">Our mission is to grow and sustain local food systems worldwide.</div><p>Â©2013 Good Eggs, Inc</p></footer></body></html>