<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Bites from Good Eggs</title><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="icon" type="image/png" href="../favicon.png" /><link rel="stylesheet" href="../styles/main.css" /><link rel="alternate" title="RSS" type="application/rss+xml" href="../rss" /><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26193287-5', 'github.io');
ga('send', 'pageview');</script></head><body><header><h1><a href="../">Bites</a></h1><ul class="unstyled nav"><li><a href="../">Blog</a></li><li><a href="../open_source">Open Source</a></li><li><a href="../news">News</a></li></ul></header><div id="main"><div id="content"><div><section>Bites is the developer site from the team building the platform for local food shopping and distribution at
<a href="https://www.goodeggs.com">goodeggs.com</a>. Here we share our experiences building applications with
full-stack JavaScript, our open source projects and insight into a developer's life at Good Eggs.</section></div><div class="blog-index"><article><header><h1 class="entry-title"><a href="../post/38240004568/synchronize-ajax-calls-for-backbone-models-and">Synchronize AJAX calls for Backbone Models and Collections</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-12-18T00:00:00.000Z">December 18th, 2012</time></p></header><div class="entry-content"><p><strong>Problem</strong>: Backbone calls save, fetch and destroy concurrently on model and collection instances but we need to control the order in which they are called.</p>
<p><strong>Solution</strong>: Implement a custom sync method that chains AJAX calls using jQuery Deferred.</div><footer><a rel="full-article" href="../post/38240004568/synchronize-ajax-calls-for-backbone-models-and">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/36053394113/synchronous-node-console-with-fibrous">Synchronous node console with fibrous</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-11-18T00:00:00.000Z">November 18th, 2012</time></p></header><div class="entry-content"><p>Node’s interactive console, or <a href="http://nodejs.org/api/repl.html">REPL</a> (Read-Eval-Print-Loop), is handy for debugging and interacting directly with our applications. The one bummer is that it’s awkward to make asynchronous calls in the console especially when they need to be nested and writing them requires multiple lines for any hope of readability.</p>
<p><a href="https://github.com/goodeggs/fibrous">fibrous</a> simplifies async coding with Node and can help us out with the REPL too.
</div><footer><a rel="full-article" href="../post/36053394113/synchronous-node-console-with-fibrous">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/35878004826/reconnecting-to-mongodb-when-mongoose-connect-fails-at">Reconnecting to MongoDB when Mongoose connect fails at startup</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-11-16T00:00:00.000Z">November 16th, 2012</time></p></header><div class="entry-content"><p>We recently experienced a short outage when a deploy to Heroku came up during a brief period when network connectivity to <a href="https://www.mongohq.com">MongoHQ</a> was down.</p>
<p>Our app came up but failed to connect to mongo. To our surprise, it did not attempt to reconnect, so even though MongoHQ came back quickly, our app continued to report errors</div><footer><a rel="full-article" href="../post/35878004826/reconnecting-to-mongodb-when-mongoose-connect-fails-at">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/36553128854/how-to-remove-a-property-from-a-mongoosejs-schema">How to Remove a Property from a Mongoose.js Schema</a></h1><p class="meta"><a href="../authors/adam_hull/">Adam Hull</a> on <time datetime="2012-11-03T00:00:00.000Z">November 3rd, 2012</time></p></header><div class="entry-content"><p>This should be simple, but Mongoose really clings to data in existing documents.  I&#39;ll walk through all the ways I wanted it to work that failed.  We&#39;ll remove an <code>organic</code> flag from a toy <code>Food</code> model so we can replace it with <a href="http://www.nytimes.com/2012/10/14/opinion/sunday/bittman-my-dream-food-label.html">Bittman&#39;s dream label</a>.  If you just came for the answer, I arrived at:</p>
<pre class="highlight"><code class="javascript">Food.collection.update({},
  {$unset: {organic: <span class="literal">true</span>}},
  {multi: <span class="literal">true</span>, safe: <span class="literal">true</span>}
);</code></pre>
<p></div><footer><a rel="full-article" href="../post/36553128854/how-to-remove-a-property-from-a-mongoosejs-schema">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/21726893435/escape-from-the-pyramid-of-doom-at-sf-js">Escape from the Pyramid of Doom at SF JS</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-04-24T00:00:00.000Z">April 24th, 2012</time></p></header><div class="entry-content"><p><center><a href="http://www.imdb.com/media/rm473086720/tt0087469"><img class="framed" width="400px" src="../images/mola-ram.jpg"></a></center></p>
<p><p>
Here are a couple notes for our talk at the <a href="http://www.meetup.com/jsmeetup/events/60203352/">San Francisco JavaScript Meetup May 24, 2012</a>. Thanks to Carbon Five for putting it together!
</p><p>
<b>Source</b>
</p><p>
Code examples are at <a href="https://github.com/goodeggs/pyramid_talk"><a href="https://github.com/goodeggs/pyramid_talk">https://github.com/goodeggs/pyramid_talk</a></a>
</p><p>
<b>Discussion</b>
</p><p>
Our thinking and practices have been informed by a number of sources which are listed here. Some of these describe differing points of view or alternative approaches. Be sure to read the comments ;-)
</p><ul><li><a href="http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/"><a href="http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/">http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/</a></a><br>
bulletproof node.js coding, by Stella Lorenzo - excellent article!
</li><li><a href="http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/"><a href="http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/">http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/</a></a><br>
Fibers v threads v … in node.js, by the author of streamline.js
</li><li><a href="http://www.mikealrogers.com/posts/a-vocal-minority.html"><a href="http://www.mikealrogers.com/posts/a-vocal-minority.html">http://www.mikealrogers.com/posts/a-vocal-minority.html</a></a><br>
A window into some of the angst in the node community around these topics
</li><li><a href="http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/"><a href="http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/">http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/</a></a><br>
Fibers, coroutines, generators,…
</li></ul><p>
<b>Reference</b>
</p><p>
Here are a few of the libraries mentioned.
</p><ul><li><a href="https://github.com/caolan/async"><a href="https://github.com/caolan/async">https://github.com/caolan/async</a></a>
</li><li><a href="https://github.com/kriskowal/q"><a href="https://github.com/kriskowal/q">https://github.com/kriskowal/q</a></a>
</li><li><a href="https://github.com/goodeggs/fibrous"><a href="https://github.com/goodeggs/fibrous">https://github.com/goodeggs/fibrous</a></a>
</li></ul><p>
The organic strawberries were from <a href="http://cuesa.org/farm/yerena-farms">Yerena Farms</a> in Watsonville!
</p><p>
<a href="http://www.flickr.com/photos/missionmercado/5075663423/"><img class="framed" width="400px" src="../images/yerena.jpg"></a>
</p><p></p>
</div></article><article><div class="entry-content"><p><a href="http://t4three.blogspot.com/2011/12/muse-of-day-espresso.html"><img class="framed" src="../images/tea-for-three-espresso.jpg" alt="Nice shot!"></a></p>
<p><a href="http://t4three.blogspot.com/2011/12/muse-of-day-espresso.html">Tea for Three</a> gets a taste of fine espresso at Good Eggs HQ. Nice shot!</p>
</div></article><article><header><h1 class="entry-title"><a href="../post/13332056735/better-asynchronous-jasmine-node-specs">Better asynchronous jasmine-node specs</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2011-11-25T00:00:00.000Z">November 25th, 2011</time></p></header><div class="entry-content"><p><b>Update 2/5/2012:</b> as of version 1.0.15 jasmine-node includes this enhancement to support asynchronous specs. The original post follows&#8230;</p>

<p>We&#8217;re using <a href="https://github.com/mhevery/jasmine-node">jasmine-node</a> for BDD-style testing of our node apps. It&#8217;s not an amazing implementation of jasmine for node but it gets the job done.</p>

<p>One of my issues with jasmine-node is its awkward support for asynchronous tests with the global <code>asyncSpecWait</code> and <code>asyncSpecDone</code> methods.</p>

<p>Inspired by the BDD style supported by <a href="http://visionmedia.github.com/mocha">Mocha</a>, I </div><footer><a rel="full-article" href="../post/13332056735/better-asynchronous-jasmine-node-specs">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/11587373922/debugging-jasmine-node-and-coffeescript-specs">Debugging jasmine-node and CoffeeScript specs</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2011-10-17T00:00:00.000Z">October 17th, 2011</time></p></header><div class="entry-content"><p>We’re writing our node apps in <a href="http://jashkenas.github.com/coffee-script/">CoffeeScript</a>, debugging with <a href="https://github.com/dannycoates/node-inspector">node-inspector</a> and testing with <a href="https://github.com/mhevery/jasmine-node">jasmine-node</a>.
</p></p>
<p>
jasmine-node does not provide a mechanism to pass command line options to node, so to run a spec with debugging enabled, you </div><footer><a rel="full-article" href="../post/11587373922/debugging-jasmine-node-and-coffeescript-specs">Continue…</a></footer></article><div class="pagination"><a class="next" href="../index.1">→ Newer</a></div></div></div></div><footer><div class="mission">Our mission is to grow and sustain local food systems worldwide.</div><p>©2013 Good Eggs, Inc</p></footer></body></html>