<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Bites from Good Eggs</title><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="icon" type="image/png" href="../favicon.png" /><link rel="stylesheet" href="../styles/main.css" /><link rel="alternate" title="RSS" type="application/rss+xml" href="../rss" /><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26193287-5', 'github.io');
ga('send', 'pageview');</script></head><body><header><h1><a href="../">Bites</a></h1><ul class="unstyled nav"><li><a href="../">Blog</a></li><li><a href="../open_source">Open Source</a></li><li><a href="../news">News</a></li></ul></header><div id="main"><div id="content"><div><section>Bites is the developer site from the team building the platform for local food shopping and distribution at
<a href="http://www.goodeggs.com">goodeggs.com</a>. Here we share our experiences building applications with
full-stack JavaScript, our open source projects and insight into a developer's life at Good Eggs.</section></div><div class="blog-index"><article><header><h1 class="entry-title"><a href="../posts/export-this/">Export This: Interface Design Patterns for Node.js Modules</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2014-01-12T00:00:00.000Z">January 12th, 2014</time></p></header><div class="entry-content"><p>When you require a module in Node, what are you getting back? When you write a module, what options do you have for designing its interface?</p>
<p>When I was first learning to work in Node I found the sheer number of ways to do things to be a bit overwhelming. JavaScript is extremely flexible and the community of developers contributing to open source seem to have different styles for implementing the same thing.</p>
<p>On my journey with Node I&#39;ve been keeping an eye out the Good Way to do things and adopting them for use in my own work and in our work at Good Eggs.</p>
<p>In this post I&#39;ll share my observations of the Node module system and the ways in which you can use it to encapsulate and share code. My goal is to identify and illustrate useful patterns for module interface design and to help you understand when and how to use them in your own work.</p>
<p>I discuss seven patterns below, many of which can be used in combination. They are:</p>
<ul>
<li><a href="../posts/export-this#namespace">Exports a Namespace</a></li>
<li><a href="../posts/export-this#function">Exports a Function</a></li>
<li><a href="../posts/export-this#higher_order_function">Exports a Higher Order Function</a></li>
<li><a href="../posts/export-this#constructor">Exports a Constructor</a></li>
<li><a href="../posts/export-this#singleton">Exports a Singleton</a></li>
<li><a href="../posts/export-this#global_object">Extends a Global Object</a></li>
<li><a href="../posts/export-this#monkey_patch">Applies a Monkey Patch</a></li>
</ul>
</div><footer><a rel="full-article" href="../posts/export-this/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../posts/first-cultivate-meetup/">Cultivate Inaugural Meetup</a></h1><p class="meta"><a href="../authors/kevin_uland/">Kevin Uland</a> on <time datetime="2013-12-06T00:00:00.000Z">December 6th, 2013</time></p></header><div class="entry-content"><p>The first <a href="http://www.meetup.com/cultivate">Cultivate meetup</a> was a huge success.</p>
<blockquote>
&quot;great first event for a meetup with a compelling mix of javascript code and social impact&quot;
</blockquote>

<blockquote>
&quot;Great meetup! Lots of interesting people and talks. Looking forward to future ones.&quot;
</blockquote>

<blockquote>
&quot;This was a great way to kickoff the Cultivate meetups; I left informed, enthused, (oh yeah, and nourished) and committed to return.&quot;
</blockquote>


</div><footer><a rel="full-article" href="../posts/first-cultivate-meetup/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../posts/fall-2013/">In Season for Fall and Winter</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2013-09-30T00:00:00.000Z">September 30th, 2013</time></p></header><div class="entry-content"><p>Last week <a href="http://blog.goodeggs.com/post/62349630794/were-thrilled-to-partner-with-sequoia-capital-to">we announced our Series A funding</a>
led by Sequoia Capital. After a summer of hustling to grow sales and build tools to keep great local food flowing smoothly
through our San Francisco foodhub we can now turn attention to building the systems we need to scale Good Eggs in
Brooklyn, New Orleans, Los Angeles and beyond.</p>
<p>Here&#39;s an overview of what we&#39;re working on and what&#39;s coming up for the software development team at Good Eggs.</p>
</div><footer><a rel="full-article" href="../posts/fall-2013/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../posts/fibrous-on-harmony-generators/">Fibrous on Harmony Generators? Impossible</a></h1><p class="meta"><a href="../authors/adam_hull/">Adam Hull</a> on <time datetime="2013-08-17T00:00:00.000Z">August 17th, 2013</time></p></header><div class="entry-content"><p>A good Friday afternoon chat about asynchronous programming models left me wondering if the fibrous API could be implemented on top of <a href="http://wiki.ecmascript.org/doku.php?id=harmony:generators">ES6 generators</a>. Generators are baked in to Node 0.11, Chrome 19, and Firefox.  A port would be a big boost to interoperability.  <a href="https://github.com/google/traceur-compiler">Traceur</a> can even transform generator based code into a <a href="http://traceur-compiler.googlecode.com/git/demo/repl.html#function*%20test%20()%20%7B%0A%20%20yield%201%3B%0A%20%20var%20a%20%3D%20yield%202%3B%0A%20%20try%20%7B%0A%20%20%20%20yield%20a%3B%0A%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20yield%2099%3B%0A%20%20%7D%0A%20%20for(var%20i%20%3D0%3B%20i%20%3C%201%3B%20i%2B%2B)%20%7B%0A%20%20%20%20yield%20123%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20normal()%20%7B%0A%20%20var%20a%20%3D%20b%3B%0A%20%20return%20b%3B%0A%7D">giant state machine</a> that runs on all of today&#39;s environments.</p>
<p>At first the port looked promising. Wikipedia claimed that general coroutines could be <a href="http://en.wikipedia.org/wiki/Coroutine#Comparison_with_generators">built on generators</a>, and many folks have <a href="http://taskjs.org/">done</a> <a href="https://gist.github.com/creationix/5762837">just</a> <a href="https://gist.github.com/Benvie/5667557">that</a>.  After a little noodling I&#39;m pretty sure it can&#39;t be done.  In a Harmony environment a function can only suspend execution at <code>yield</code> expressions and <code>yield</code> expressions can only appear in generator functions. A yield expression cannot be wrapped up behind a fibrous <code>sync</code> or <code>wait</code>.</p>
</div><footer><a rel="full-article" href="../posts/fibrous-on-harmony-generators/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../posts/ids-in-mongoose-json-and-backbone/">Ids in Mongoose, JSON, and Backbone</a></h1><p class="meta"><a href="../authors/adam_hull/">Adam Hull</a> on <time datetime="2013-04-02T00:00:00.000Z">April 2nd, 2013</time></p></header><div class="entry-content"><p>Mongoose adds <a href="http://mongoosejs.com/docs/guide.html#id">id sugar</a> on top the default _id document attribute.  Backbone has <a href="http://backbonejs.org/#Model-idAttribute">similar sugar</a>, but the types don&#39;t line up.  Pushing bits between the two with a customary JSON document adds a third representation.</p>
<p>If you find yourself typing <code>vegetable.id</code> when you really needed <code>new ObjectID(vegetable.toJSON()._id)</code> this fancy chart might help:
</div><footer><a rel="full-article" href="../posts/ids-in-mongoose-json-and-backbone/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/41935904836/restructuring-assignment-in-coffeescript">Structuring Expressions in CoffeeScript</a></h1><p class="meta"><a href="../authors/adam_hull/">Adam Hull</a> on <time datetime="2013-02-12T00:00:00.000Z">February 12th, 2013</time></p></header><div class="entry-content"><p>CoffeeScript can save as many keystrokes putting objects together as it can taking them apart.</p>
<p class="update">
  For a while I was calling this lexeme <em>restructuring assignment</em> until some on Stack Overflow <a href="http://stackoverflow.com/a/14822198/407845">pointed out that name was ridiculous</a>.  Now I&#39;ve taken to the name <em>structuring expressions</em>.
</p>

</div><footer><a rel="full-article" href="../post/41935904836/restructuring-assignment-in-coffeescript">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/40042760798/teacup-coffeescript-templates-for-developer-happiness">Teacup: CoffeeScript Templates for Developer Happiness</a></h1><p class="meta"><a href="../authors/adam_hull/">Adam Hull</a> on <time datetime="2013-01-08T00:00:00.000Z">January 8th, 2013</time></p></header><div class="entry-content"><p><a href="http://goodeggs.github.com/teacup/"><img src="https://raw.github.com/goodeggs/teacup/master/docs/teacup.jpg" alt="Teacup"></a></p>
<p>We&#8217;ve released a <a href="http://goodeggs.github.com/teacup/">templating language</a> that feels just right for a team of full stack CoffeeScript developers optimizing for developer happiness.  Check out the <a href="http://goodeggs.github.com/teacup/#getting-started">example integrations</a> with Backbone, Express, and Rails, or try it neat in the browser.  Teacup builds on <a href="https://github.com/mark-hahn/drykup">a</a> <a href="https://github.com/markaby/markaby">rich</a> <a href="https://github.com/mauricemach/coffeekup">history</a> of templating in the language of your app to minimize context switching and toolchain duplication while trusting the developer to maintain separation between domain and templating tiers.  Here&#8217;s a quick sample:</p>
<pre class="highlighted"><code class="coffeescript">{renderable, ul, li, input} = require <span class="string">'teacup'</span>

template = renderable (teas)-&gt;
  ul -&gt;
    <span class="keyword">for</span> tea <span class="keyword">in</span> teas
      li tea
    input type: <span class="string">'button'</span>, value: <span class="string">'Steep'</span>

console.log template([<span class="string">'Jasmine'</span>, <span class="string">'Darjeeling'</span>])</code></pre>
<p>Outputs:</p>
<pre class="highlighted"><code class="xml"><span class="tag">&lt;<span class="title">ul</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Jasmine<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Darjeeling<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">value</span>=<span class="value">"Steep"</span>/&gt;</span></code></pre>
<p>Try it out!</p>
</div></article><article><header><h1 class="entry-title"><a href="../post/38240004568/synchronize-ajax-calls-for-backbone-models-and">Synchronize AJAX calls for Backbone Models and Collections</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-12-18T00:00:00.000Z">December 18th, 2012</time></p></header><div class="entry-content"><p><strong>Problem</strong>: Backbone calls save, fetch and destroy concurrently on model and collection instances but we need to control the order in which they are called.</p>
<p><strong>Solution</strong>: Implement a custom sync method that chains AJAX calls using jQuery Deferred.</div><footer><a rel="full-article" href="../post/38240004568/synchronize-ajax-calls-for-backbone-models-and">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/36053394113/synchronous-node-console-with-fibrous">Synchronous node console with fibrous</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-11-18T00:00:00.000Z">November 18th, 2012</time></p></header><div class="entry-content"><p>Node’s interactive console, or <a href="http://nodejs.org/api/repl.html">REPL</a> (Read-Eval-Print-Loop), is handy for debugging and interacting directly with our applications. The one bummer is that it’s awkward to make asynchronous calls in the console especially when they need to be nested and writing them requires multiple lines for any hope of readability.</p>
<p><a href="https://github.com/goodeggs/fibrous">fibrous</a> simplifies async coding with Node and can help us out with the REPL too.
</div><footer><a rel="full-article" href="../post/36053394113/synchronous-node-console-with-fibrous">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="../post/35878004826/reconnecting-to-mongodb-when-mongoose-connect-fails-at">Reconnecting to MongoDB when Mongoose connect fails at startup</a></h1><p class="meta"><a href="../authors/alon_salant/">Alon Salant</a> on <time datetime="2012-11-16T00:00:00.000Z">November 16th, 2012</time></p></header><div class="entry-content"><p>We recently experienced a short outage when a deploy to Heroku came up during a brief period when network connectivity to <a href="https://www.mongohq.com">MongoHQ</a> was down.</p>
<p>Our app came up but failed to connect to mongo. To our surprise, it did not attempt to reconnect, so even though MongoHQ came back quickly, our app continued to report errors</div><footer><a rel="full-article" href="../post/35878004826/reconnecting-to-mongodb-when-mongoose-connect-fails-at">Continue…</a></footer></article><div class="pagination"><a class="prev" href="../index.2">← Older</a><a class="next" href="../">→ Newer</a></div></div></div></div><footer><div class="mission">Our mission is to grow and sustain local food systems worldwide.</div><p>©2013 Good Eggs, Inc</p></footer></body></html>