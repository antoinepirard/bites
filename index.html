<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Bites from Good Eggs</title><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="icon" type="image/png" href="./favicon.png" /><link rel="stylesheet" href="./styles/main.css" /><link rel="alternate" title="RSS" type="application/rss+xml" href="./rss" /><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26193287-5', 'github.io');
ga('send', 'pageview');</script></head><body><header><h1><a href="./">Bites</a></h1><ul class="unstyled nav"><li><a href="./">Blog</a></li><li><a href="./open_source">Open Source</a></li><li><a href="./news">News</a></li></ul></header><div id="main"><div id="content"><div class="intro">Bites is the developer site from the team building the platform for local food shopping and distribution at
<a href="http://www.goodeggs.com">goodeggs.com</a>. Here we share our experiences building applications with
full-stack JavaScript, our open source projects and insight into a developer's life at Good Eggs.</div><div class="blog-index"><article><header><h1 class="entry-title"><a href="./posts/fall_2013/">In Season for Fall and Winter</a></h1><p class="meta">Alon Salant on <time datetime="2013-09-30T00:00:00.000Z">September 30th, 2013</time></p></header><div class="entry-content"><p>Last week <a href="http://blog.goodeggs.com/post/62349630794/were-thrilled-to-partner-with-sequoia-capital-to">we announced our Series A funding</a>
led by Sequoia Capital. After a summer of hustling to grow sales and build tools to keep great local food flowing smoothly
through our San Francisco foodhub we can now turn attention to building the systems we need to scale Good Eggs in
Brooklyn, New Orleans, Los Angeles and beyond.</p>
<p>Here&#39;s an overview of what we&#39;re working on and what&#39;s coming up for the software development team at Good Eggs.</p>
</div><footer><a rel="full-article" href="./posts/fall_2013/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./posts/fibrous-on-harmony-generators/">Fibrous on Harmony Generators? Impossible</a></h1><p class="meta">Adam Hull on <time datetime="2013-08-17T00:00:00.000Z">August 17th, 2013</time></p></header><div class="entry-content"><p>A good Friday afternoon chat about asynchronous programming models left me wondering if the fibrous API could be implemented on top of <a href="http://wiki.ecmascript.org/doku.php?id=harmony:generators">ES6 generators</a>. Generators are baked in to Node 0.11, Chrome 19, and Firefox.  A port would be a big boost to interoperability.  <a href="https://github.com/google/traceur-compiler">Traceur</a> can even transform generator based code into a <a href="http://traceur-compiler.googlecode.com/git/demo/repl.html#function*%20test%20()%20%7B%0A%20%20yield%201%3B%0A%20%20var%20a%20%3D%20yield%202%3B%0A%20%20try%20%7B%0A%20%20%20%20yield%20a%3B%0A%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20yield%2099%3B%0A%20%20%7D%0A%20%20for(var%20i%20%3D0%3B%20i%20%3C%201%3B%20i%2B%2B)%20%7B%0A%20%20%20%20yield%20123%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20normal()%20%7B%0A%20%20var%20a%20%3D%20b%3B%0A%20%20return%20b%3B%0A%7D">giant state machine</a> that runs on all of today&#39;s environments.</p>
<p>At first the port looked promising. Wikipedia claimed that general coroutines could be <a href="http://en.wikipedia.org/wiki/Coroutine#Comparison_with_generators">built on generators</a>, and many folks have <a href="http://taskjs.org/">done</a> <a href="https://gist.github.com/creationix/5762837">just</a> <a href="https://gist.github.com/Benvie/5667557">that</a>.  After a little noodling I&#39;m pretty sure it can&#39;t be done.  In a Harmony environment a function can only suspend execution at <code>yield</code> expressions and <code>yield</code> expressions can only appear in generator functions. A yield expression cannot be wrapped up behind a fibrous <code>sync</code> or <code>wait</code>.</p>
</div><footer><a rel="full-article" href="./posts/fibrous-on-harmony-generators/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./posts/ids-in-mongoose-json-and-backbone/">Ids in Mongoose, JSON, and Backbone</a></h1><p class="meta">Adam Hull on <time datetime="2013-04-02T00:00:00.000Z">April 2nd, 2013</time></p></header><div class="entry-content"><p>Mongoose adds <a href="http://mongoosejs.com/docs/guide.html#id">id sugar</a> on top the default _id document attribute.  Backbone has <a href="http://backbonejs.org/#Model-idAttribute">similar sugar</a>, but the types don&#39;t line up.  Pushing bits between the two with a customary JSON document adds a third representation.</p>
<p>If you find yourself typing <code>vegetable.id</code> when you really needed <code>new ObjectID(vegetable.toJSON()._id)</code> this fancy chart might help:
</div><footer><a rel="full-article" href="./posts/ids-in-mongoose-json-and-backbone/">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./post/41935904836/restructuring-assignment-in-coffeescript">Structuring Expressions in CoffeeScript</a></h1><p class="meta">Adam Hull on <time datetime="2013-02-12T00:00:00.000Z">February 12th, 2013</time></p></header><div class="entry-content"><p>CoffeeScript can save as many keystrokes putting objects together as it can taking them apart.</p>
<p class="update">
  For a while I was calling this lexeme <em>restructuring assignment</em> until some on Stack Overflow <a href="http://stackoverflow.com/a/14822198/407845">pointed out that name was ridiculous</a>.  Now I&#39;ve taken to the name <em>structuring expressions</em>.
</p>

</div><footer><a rel="full-article" href="./post/41935904836/restructuring-assignment-in-coffeescript">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./post/40042760798/teacup-coffeescript-templates-for-developer-happiness">Teacup: CoffeeScript Templates for Developer Happiness</a></h1><p class="meta">Adam Hull on <time datetime="2013-01-08T00:00:00.000Z">January 8th, 2013</time></p></header><div class="entry-content"><p><a href="http://goodeggs.github.com/teacup/"><img src="https://raw.github.com/goodeggs/teacup/master/docs/teacup.jpg" alt="Teacup"></a></p>
<p>We&#8217;ve released a <a href="http://goodeggs.github.com/teacup/">templating language</a> that feels just right for a team of full stack CoffeeScript developers optimizing for developer happiness.  Check out the <a href="http://goodeggs.github.com/teacup/#getting-started">example integrations</a> with Backbone, Express, and Rails, or try it neat in the browser.  Teacup builds on <a href="https://github.com/mark-hahn/drykup">a</a> <a href="https://github.com/markaby/markaby">rich</a> <a href="https://github.com/mauricemach/coffeekup">history</a> of templating in the language of your app to minimize context switching and toolchain duplication while trusting the developer to maintain separation between domain and templating tiers.  Here&#8217;s a quick sample:</p>
<pre class="highlighted"><code class="coffeescript">{renderable, ul, li, input} = require <span class="string">'teacup'</span>

template = renderable (teas)-&gt;
  ul -&gt;
    <span class="keyword">for</span> tea <span class="keyword">in</span> teas
      li tea
    input type: <span class="string">'button'</span>, value: <span class="string">'Steep'</span>

console.log template([<span class="string">'Jasmine'</span>, <span class="string">'Darjeeling'</span>])</code></pre>
<p>Outputs:</p>
<pre class="highlighted"><code class="xml"><span class="tag">&lt;<span class="title">ul</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Jasmine<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Darjeeling<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">value</span>=<span class="value">"Steep"</span>/&gt;</span></code></pre>
<p>Try it out!</p>
</div></article><article><header><h1 class="entry-title"><a href="./post/38240004568/synchronize-ajax-calls-for-backbone-models-and">Synchronize AJAX calls for Backbone Models and Collections</a></h1><p class="meta">Alon Salant on <time datetime="2012-12-18T00:00:00.000Z">December 18th, 2012</time></p></header><div class="entry-content"><p><strong>Problem</strong>: Backbone calls save, fetch and destroy concurrently on model and collection instances but we need to control the order in which they are called.</p>
<p><strong>Solution</strong>: Implement a custom sync method that chains AJAX calls using jQuery Deferred.</div><footer><a rel="full-article" href="./post/38240004568/synchronize-ajax-calls-for-backbone-models-and">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./post/36053394113/synchronous-node-console-with-fibrous">Synchronous node console with fibrous</a></h1><p class="meta">Alon Salant on <time datetime="2012-11-18T00:00:00.000Z">November 18th, 2012</time></p></header><div class="entry-content"><p>Node’s interactive console, or <a href="http://nodejs.org/api/repl.html">REPL</a> (Read-Eval-Print-Loop), is handy for debugging and interacting directly with our applications. The one bummer is that it’s awkward to make asynchronous calls in the console especially when they need to be nested and writing them requires multiple lines for any hope of readability.</p>
<p><a href="https://github.com/goodeggs/fibrous">fibrous</a> simplifies async coding with Node and can help us out with the REPL too.
</div><footer><a rel="full-article" href="./post/36053394113/synchronous-node-console-with-fibrous">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./post/35878004826/reconnecting-to-mongodb-when-mongoose-connect-fails-at">Reconnecting to MongoDB when Mongoose connect fails at startup</a></h1><p class="meta">Alon Salant on <time datetime="2012-11-16T00:00:00.000Z">November 16th, 2012</time></p></header><div class="entry-content"><p>We recently experienced a short outage when a deploy to Heroku came up during a brief period when network connectivity to <a href="https://www.mongohq.com">MongoHQ</a> was down.</p>
<p>Our app came up but failed to connect to mongo. To our surprise, it did not attempt to reconnect, so even though MongoHQ came back quickly, our app continued to report errors</div><footer><a rel="full-article" href="./post/35878004826/reconnecting-to-mongodb-when-mongoose-connect-fails-at">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./post/36553128854/how-to-remove-a-property-from-a-mongoosejs-schema">How to Remove a Property from a Mongoose.js Schema</a></h1><p class="meta">Adam Hull on <time datetime="2012-11-03T00:00:00.000Z">November 3rd, 2012</time></p></header><div class="entry-content"><p>This should be simple, but Mongoose really clings to data in existing documents.  I&#39;ll walk through all the ways I wanted it to work that failed.  We&#39;ll remove an <code>organic</code> flag from a toy <code>Food</code> model so we can replace it with <a href="http://www.nytimes.com/2012/10/14/opinion/sunday/bittman-my-dream-food-label.html">Bittman&#39;s dream label</a>.  If you just came for the answer, I arrived at:</p>
<pre class="highlighted"><code class="javascript">Food.collection.update({},
  {$unset: {organic: <span class="literal">true</span>}},
  {multi: <span class="literal">true</span>, safe: <span class="literal">true</span>}
);</code></pre>
<p></div><footer><a rel="full-article" href="./post/36553128854/how-to-remove-a-property-from-a-mongoosejs-schema">Continue…</a></footer></article><article><header><h1 class="entry-title"><a href="./post/21726893435/escape-from-the-pyramid-of-doom-at-sf-js">Escape from the Pyramid of Doom at SF JS</a></h1><p class="meta">Alon Salant on <time datetime="2012-04-24T00:00:00.000Z">April 24th, 2012</time></p></header><div class="entry-content"><p><center><a href="http://www.imdb.com/media/rm473086720/tt0087469"><img class="framed" width="400px" src="./images/mola-ram.jpg"></a></center></p>
<p><p>
Here are a couple notes for our talk at the <a href="http://www.meetup.com/jsmeetup/events/60203352/">San Francisco JavaScript Meetup May 24, 2012</a>. Thanks to Carbon Five for putting it together!
</p><p>
<b>Source</b>
</p><p>
Code examples are at <a href="https://github.com/goodeggs/pyramid_talk"><a href="https://github.com/goodeggs/pyramid_talk">https://github.com/goodeggs/pyramid_talk</a></a>
</p><p>
<b>Discussion</b>
</p><p>
Our thinking and practices have been informed by a number of sources which are listed here. Some of these describe differing points of view or alternative approaches. Be sure to read the comments ;-)
</p><ul><li><a href="http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/"><a href="http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/">http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/</a></a><br>
bulletproof node.js coding, by Stella Lorenzo - excellent article!
</li><li><a href="http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/"><a href="http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/">http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/</a></a><br>
Fibers v threads v … in node.js, by the author of streamline.js
</li><li><a href="http://www.mikealrogers.com/posts/a-vocal-minority.html"><a href="http://www.mikealrogers.com/posts/a-vocal-minority.html">http://www.mikealrogers.com/posts/a-vocal-minority.html</a></a><br>
A window into some of the angst in the node community around these topics
</li><li><a href="http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/"><a href="http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/">http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/</a></a><br>
Fibers, coroutines, generators,…
</li></ul><p>
<b>Reference</b>
</p><p>
Here are a few of the libraries mentioned.
</p><ul><li><a href="https://github.com/caolan/async"><a href="https://github.com/caolan/async">https://github.com/caolan/async</a></a>
</li><li><a href="https://github.com/kriskowal/q"><a href="https://github.com/kriskowal/q">https://github.com/kriskowal/q</a></a>
</li><li><a href="https://github.com/goodeggs/fibrous"><a href="https://github.com/goodeggs/fibrous">https://github.com/goodeggs/fibrous</a></a>
</li></ul><p>
The organic strawberries were from <a href="http://cuesa.org/farm/yerena-farms">Yerena Farms</a> in Watsonville!
</p><p>
<a href="http://www.flickr.com/photos/missionmercado/5075663423/"><img class="framed" width="400px" src="./images/yerena.jpg"></a>
</p><p></p>
</div></article><div class="pagination"><a class="prev" href="./index.1">← Older</a></div></div></div></div><footer><div class="mission">Our mission is to grow and sustain local food systems worldwide.</div><p>©2013 Good Eggs, Inc</p></footer></body></html>