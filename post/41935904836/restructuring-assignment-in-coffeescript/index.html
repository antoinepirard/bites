<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Structuring Expressions in CoffeeScript | Bites from Good Eggs</title><meta name="author" content="Adam Hull" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="icon" type="image/png" href="../../../favicon.png" /><link rel="stylesheet" href="../../../styles/main.css" /><link rel="alternate" title="RSS" type="application/rss+xml" href="../../../rss" /><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26193287-5', 'github.io');
ga('send', 'pageview');</script></head><body><header><h1><a href="../../../">Bites</a></h1><ul class="unstyled nav"><li><a href="../../../">Blog</a></li><li><a href="../../../open_source">Open Source</a></li><li><a href="../../../news">News</a></li></ul></header><div id="main"><div id="content"><div><article class="hentry" role="article"><header><h1 class="entry-title">Structuring Expressions in CoffeeScript</h1><p class="meta"><a href="../../../authors/adam_hull/">Adam Hull</a> on <time datetime="2013-02-12T00:00:00.000Z">February 12th, 2013</time></p></header><div class="entry-content"><p>CoffeeScript can save as many keystrokes putting objects together as it can taking them apart.</p>
<p class="update">
  For a while I was calling this lexeme <em>restructuring assignment</em> until some on Stack Overflow <a href="http://stackoverflow.com/a/14822198/407845">pointed out that name was ridiculous</a>.  Now I&#39;ve taken to the name <em>structuring expressions</em>.
</p>

<!-- more -->

<p>Sure <a href="http://blog.carbonfive.com/2011/09/28/destructuring-assignment-in-coffeescript/">C5 told you all about</a> CoffeeScript’s <a href="http://coffeescript.org/#destructuring">destructing assignment</a> syntax for objects…</p>
<p>How it can reach deep into nested structures</p>
<pre><code class="lang-coffeescript">coffee&gt; user = name: &#39;Foo&#39;, age: 42, address: { city: &#39;Anytown&#39;, state:
&#39;AL&#39; }
{ name: &#39;Foo&#39;, age: 42, address: { city: &#39;Anytown&#39;, state: &#39;AL&#39; } }

coffee&gt; { address: { city, state } } = user
{ name: &#39;Foo&#39;, age: 42, address: { city: &#39;Anytown&#39;, state: &#39;AL&#39; } }

coffee&gt; city
&#39;Anytown&#39;</code></pre>
<p>Or pluck apart function arguments</p>
<pre><code class="lang-coffeescript">displayName = ({ name, age }) -&gt;
  console.log &quot;#{name}, #{age} year(s) old&quot;

coffee&gt; displayName name: &#39;Foo&#39;, age: 42
Foo, 42 year(s) old</code></pre>
<p>Or even destructure directly to instance attributes</p>
<pre><code class="lang-coffeescript">class User
  constructor: ({ @name, @age }) -&gt;

coffee&gt; new User(name: &#39;Foo&#39;, age: 42)
{ name: &#39;foo&#39;, age: 42 }</code></pre>
<p>But what does this do?</p>
<pre><code class="lang-coffeescript">coffee&gt; age = 42
42

coffee&gt; user = { &#39;Foo&#39;, age }
?</code></pre>
<p>My fudge-fingers managed to mash that one unknowingly into my editor one day while attempting to rack up velocity points on the latest story. Instead of hemorrhaging the expected SyntaxError, it evaluated to this beautiful new object</p>
<pre><code class="lang-coffeescript">{ Foo: &#39;Foo&#39;, age: 42 }</code></pre>
<p>Now I’ve got a handy set syntax</p>
<pre><code class="lang-coffeescript">coffee&gt; 2 of { 1, 2, 5 }
true

coffee&gt; 2 of { 1, 3, 5 }
false</code></pre>
<p>And with consistent variable naming, breezy data marshaling between some framework actors</p>
<pre><code class="lang-coffeescript">class User
  constructor: ({ @name, @age }) -&gt;

template = ({ user, face }) -&gt;
  &quot;&lt;div&gt;#{user.name} #{face}&lt;/div&gt;&quot;

class UserView
  constructor: ({ @user }) -&gt;

  render: -&gt;
    @html = template {
      @user
      face: &#39;:)&#39;
    }

coffee&gt; user = new User(name: &#39;Foo&#39;, age: 42)
{ name: &#39;Foo&#39;, age: 42 }

coffee&gt; view = new UserView {user}
{ user: { name: &#39;Foo&#39;, age: 42 } }

coffee&gt; view.render()
&#39;&lt;div&gt;Foo :)&lt;/div&gt;&#39;</code></pre>
</div><footer><p class="meta"><a class="basic-alignment left" href="../../../post/40042760798/teacup-coffeescript-templates-for-developer-happiness">&laquo; Teacup: CoffeeScript Templates for Developer Happiness</a><a class="basic-alignment right" href="../../../posts/ids-in-mongoose-json-and-backbone/">Ids in Mongoose, JSON, and Backbone &raquo;</a></p><div id="disqus_thread"></div><script>window.disqus_shortname = 'goodeggsbytes'; window.disqus_url = 'http://bytes.goodeggs.com/post/41935904836/restructuring-assignment-in-coffeescript'</script><script async="async" src="//goodeggsbytes.disqus.com/embed.js"></script></footer></article></div></div></div><footer><div class="mission">Our mission is to grow and sustain local food systems worldwide.</div><p>©2013 Good Eggs, Inc</p></footer></body></html>