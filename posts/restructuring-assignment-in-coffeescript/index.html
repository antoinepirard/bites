<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Structuring Expressions in CoffeeScript | Bites from Good Eggs</title><meta name="author" content="Adam Hull" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="shortcut icon" href="/favicon.ico?v=2" /><link rel="stylesheet" href="/styles/main.css" /><link rel="alternate" title="RSS" type="application/rss+xml" href="/rss" /><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26193287-5', 'github.io');
ga('send', 'pageview');</script></head><body><header><h1><a href="/">Bites</a></h1><ul class="unstyled nav"><li><a href="/">Blog</a></li><li><a href="/open_source/">Open Source</a></li><li><a href="/news/">News</a></li></ul></header><div id="main"><div id="content"><div><article class="post" role="article"><header><img class="author" src="http://fpio.goodeggs.com/api/file/ziGF1yRt2PAZq3BpMQAA/convert?w=150&amp;h=150&amp;fit=crop&amp;align=faces&amp;cache=true" alt="Adam Hull" /><h1 class="entry-title">Structuring Expressions in CoffeeScript</h1><p class="meta"><a class="entry-author-name" href="/authors/adam_hull/">Adam Hull</a> on <time datetime="2013-02-12T20:00:00.000Z">February 12th, 2013</time></p></header><div class="entry-content"><p>CoffeeScript can save as many keystrokes putting objects together as it can taking them apart.</p>
<p class="update">
  For a while I was calling this lexeme <em>restructuring assignment</em> until some on Stack Overflow <a href="http://stackoverflow.com/a/14822198/407845">pointed out that name was ridiculous</a>.  Now I&#39;ve taken to the name <em>structuring expressions</em>.
</p>

<!-- more -->

<p>Sure <a href="http://blog.carbonfive.com/2011/09/28/destructuring-assignment-in-coffeescript/">C5 told you all about</a> CoffeeScript’s <a href="http://coffeescript.org/#destructuring">destructing assignment</a> syntax for objects…</p>
<p>How it can reach deep into nested structures</p>
<pre><code class="coffeescript">coffee&gt; user = <span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span>, <span class="hljs-attribute">address</span>: { <span class="hljs-attribute">city</span>: <span class="hljs-string">'Anytown'</span>, <span class="hljs-attribute">state</span>:
<span class="hljs-string">'AL'</span> }
{ <span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span>, <span class="hljs-attribute">address</span>: { <span class="hljs-attribute">city</span>: <span class="hljs-string">'Anytown'</span>, <span class="hljs-attribute">state</span>: <span class="hljs-string">'AL'</span> } }

coffee&gt; { <span class="hljs-attribute">address</span>: { city, state } } = user
{ <span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span>, <span class="hljs-attribute">address</span>: { <span class="hljs-attribute">city</span>: <span class="hljs-string">'Anytown'</span>, <span class="hljs-attribute">state</span>: <span class="hljs-string">'AL'</span> } }

coffee&gt; city
<span class="hljs-string">'Anytown'</span></code></pre>

<p>Or pluck apart function arguments</p>
<pre><code class="coffeescript"><span class="hljs-function"><span class="hljs-title">displayName</span> = <span class="hljs-params">({ name, age })</span> -&gt;</span>
  <span class="hljs-built_in">console</span>.log <span class="hljs-string">"<span class="hljs-subst">#{name}</span>, <span class="hljs-subst">#{age}</span> year(s) old"</span>

coffee&gt; displayName <span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span>
Foo, <span class="hljs-number">42</span> year(s) old</code></pre>

<p>Or even destructure directly to instance attributes</p>
<pre><code class="coffeescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">({ <span class="hljs-property">@name</span>, <span class="hljs-property">@age</span> })</span> -&gt;</span>

coffee&gt; <span class="hljs-keyword">new</span> User(<span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span>)
{ <span class="hljs-attribute">name</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span> }</code></pre>

<p>But what does this do?</p>
<pre><code class="coffeescript">coffee&gt; age = <span class="hljs-number">42</span>
<span class="hljs-number">42</span>

coffee&gt; user = { <span class="hljs-string">'Foo'</span>, age }
?</code></pre>

<p>My fudge-fingers managed to mash that one unknowingly into my editor one day while attempting to rack up velocity points on the latest story. Instead of hemorrhaging the expected SyntaxError, it evaluated to this beautiful new object</p>
<pre><code class="coffeescript">{ <span class="hljs-attribute">Foo</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span> }</code></pre>

<p>Now I’ve got a handy set syntax</p>
<pre><code class="coffeescript">coffee&gt; <span class="hljs-number">2</span> <span class="hljs-keyword">of</span> { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span> }
<span class="hljs-literal">true</span>

coffee&gt; <span class="hljs-number">2</span> <span class="hljs-keyword">of</span> { <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span> }
<span class="hljs-literal">false</span></code></pre>

<p>And with consistent variable naming, breezy data marshaling between some framework actors</p>
<pre><code class="coffeescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">({ <span class="hljs-property">@name</span>, <span class="hljs-property">@age</span> })</span> -&gt;</span>

<span class="hljs-function"><span class="hljs-title">template</span> = <span class="hljs-params">({ user, face })</span> -&gt;</span>
  <span class="hljs-string">"&lt;div&gt;<span class="hljs-subst">#{user.name}</span> <span class="hljs-subst">#{face}</span>&lt;/div&gt;"</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserView</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">({ <span class="hljs-property">@user</span> })</span> -&gt;</span>

  <span class="hljs-attribute">render</span>:<span class="hljs-function"> -&gt;</span>
    <span class="hljs-property">@html</span> = template {
      <span class="hljs-property">@user</span>
      <span class="hljs-attribute">face</span>: <span class="hljs-string">':)'</span>
    }

coffee&gt; user = <span class="hljs-keyword">new</span> User(<span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span>)
{ <span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span> }

coffee&gt; view = <span class="hljs-keyword">new</span> UserView {user}
{ <span class="hljs-attribute">user</span>: { <span class="hljs-attribute">name</span>: <span class="hljs-string">'Foo'</span>, <span class="hljs-attribute">age</span>: <span class="hljs-number">42</span> } }

coffee&gt; view.render()
<span class="hljs-string">'&lt;div&gt;Foo :)&lt;/div&gt;'</span></code></pre></div><footer><p class="meta"><a class="basic-alignment left" href="/posts/teacup-coffeescript-templates-for-developer-happiness/">&laquo; Teacup: CoffeeScript Templates for Developer Happiness</a><a class="basic-alignment right" href="/posts/ids-in-mongoose-json-and-backbone/">Ids in Mongoose, JSON, and Backbone &raquo;</a></p><div id="disqus_thread"></div><script>window.disqus_shortname = 'goodeggsbytes'; window.disqus_url = 'http://bytes.goodeggs.com/post/41935904836/restructuring-assignment-in-coffeescript'</script><script async="async" src="//goodeggsbytes.disqus.com/embed.js"></script></footer></article></div></div></div><footer><div class="mission">Our mission is to grow and sustain local food systems worldwide.</div><p>©2013 Good Eggs, Inc</p></footer></body></html>